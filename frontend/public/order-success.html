<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Заказ оформлен — SmartCook</title>
    <link rel="stylesheet" href="css/style.css?v=25">
    <style>
        .success-container {
            max-width: 600px;
            margin: 60px auto;
            padding: 40px;
            text-align: center;
            background: #1a1a1a;
            border-radius: 20px;
        }
        
        .success-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 1s ease;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-20px);}
            60% {transform: translateY(-10px);}
        }
        
        .order-details {
            background: rgba(255,255,255,0.05);
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            text-align: left;
        }
        
        .order-details p {
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
        }
        
        .order-id {
            color: #38bdf8;
            font-weight: bold;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.6), 0 0 40px rgba(167, 139, 250, 0.4);
        }
        
        .btn-primary {
            background: linear-gradient(90deg, #38bdf8, #a78bfa);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(90deg, #38bdf8, #a78bfa);
            color: white;
        }
        
        .btn-tertiary {
            background: linear-gradient(90deg, #38bdf8, #a78bfa);
            color: white;
        }
        
        .whats-next {
            margin-top: 40px;
            padding-top: 25px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #94a3b8;
            font-size: 14px;
        }
    </style>
</head>
<body>

<header class="header">
    <div class="header-left">
        <div class="logo-block">
            <img src="images/logotip.png" alt="SmartCook logo" class="logo-img">
            <div class="logo-text">SmartCook</div>
        </div>

        <nav class="nav">
            <a href="index.html">Главная</a>
            <a href="catalog.html">Каталог товаров</a>
            <a href="sales.html">Акции</a>
            <a href="favorites.html">Избранное</a>
            
        </nav>
    </div>

    <div class="header-right">
        <a href="cart.html" class="cart-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 20C19 21.11 18.11 22 17 22C15.89 22 15 21.1 15 20C15 18.89 15.89 18 17 18C18.11 18 19 18.9 19 20M7 18C5.89 18 5 18.89 5 20C5 21.1 5.89 22 7 22C8.11 22 9 21.11 9 20S8.11 18 7 18M7.2 14.63L7.17 14.75C7.17 14.89 7.28 15 7.42 15H19V17H7C5.89 17 5 16.1 5 15C5 14.65 5.09 14.32 5.24 14.04L6.6 11.59L3 4H1V2H4.27L5.21 4H20C20.55 4 21 4.45 21 5C21 5.17 20.95 5.34 20.88 5.5L17.3 11.97C16.96 12.58 16.3 13 15.55 13H8.1L7.2 14.63M8.5 11H10V9H7.56L8.5 11M11 9V11H14V9H11M14 8V6H11V8H14M17.11 9H15V11H16L17.11 9M18.78 6H15V8H17.67L18.78 6M6.14 6L7.08 8H10V6H6.14Z"/>
            </svg>
            <span id="cart-count" class="cart-count" style="display: none;">0</span>
        </a>
    </div>
</header>

<main class="success-container">
    <div class="success-icon">✅</div>
    
    <h1>Заказ успешно оформлен!</h1>
    <p>Спасибо за ваш заказ. Мы свяжемся с вами в ближайшее время.</p>
    
    <div class="order-details">
        <p>
            <span>Номер заказа:</span>
            <span id="order-number" class="order-id"></span>
        </p>
        <p>
            <span>Дата заказа:</span>
            <span id="order-date"></span>
        </p>
        <p>
            <span>Сумма заказа:</span>
            <span id="order-total"></span>
        </p>
        <p>
            <span>Статус:</span>
            <span id="order-status" style="color: #fbbf24;">Ожидает оплаты</span>
        </p>
    </div>
    
    <div class="whats-next">
        <h3>Что дальше?</h3>
        <p>1. В течение 15 минут с вами свяжется менеджер для подтверждения заказа</p>
        <p>2. Мы подготовим ваш заказ к отправке</p>
        <p>3. Вы получите SMS с информацией о доставке</p>
    </div>
    
    <div class="action-buttons">
        <a href="profile.html" class="btn btn-primary">Вернуться в профиль</a>
        <a href="index.html" class="btn btn-secondary">Вернуться на главную</a>
        <a href="catalog.html" class="btn btn-tertiary">Продолжить покупки</a>
    </div>
</main>

<footer class="footer">
    <!-- Стандартный футер -->
    <div class="footer-content">
        <div class="footer-brand">
            <h3>SmartCook</h3>
            <p>Лучшая техника для современной кухни</p>
        </div>

        <div class="footer-links">
            <h4>Помощь</h4>
            <a href="help.html#delivery">Доставка и оплата</a>
            <a href="help.html#warranty">Гарантия и возврат</a>
            <a href="help.html#reviews">Отзывы</a>
        </div>

        <div class="footer-links">
            <h4>Категории</h4>
            <a href="catalog.html?category=2">Кофемашины</a>
            <a href="catalog.html?category=1">Холодильники</a>
            <a href="catalog.html?category=3">Посудомоечные машины</a>
        </div>

        <div class="footer-contacts">
            <h4>Контакты</h4>
            <p>г. Санкт-Петербург, Вознесенский пр., д. 23</p>
            <p>+7 (931) 123-45-67</p>
            <p>info@smartcook.ru</p>
            <p>Пн-Пт: 10:00-20:00, Сб-Вс: 11:00-18:00</p>
        </div>
    </div>

    <p class="footer-copy">© 2025 SmartCook. Все права защищены.</p>
</footer>

<script src="js/config.js"></script>
<script>
// Получаем ID заказа из URL
const urlParams = new URLSearchParams(window.location.search);
const orderId = urlParams.get('id');

if (orderId) {
    console.log('Загружаю данные заказа:', orderId);
    // Загружаем данные заказа с сервера
    fetch(`${API_BASE_URL}/orders/detail/${orderId}`)
        .then(response => {
            console.log('Ответ сервера:', response.status);
            if (!response.ok) {
                throw new Error('Заказ не найден');
            }
            return response.json();
        })
        .then(order => {
            console.log('Полученные данные заказа:', order);
            // Заполняем информацию о заказе
            document.getElementById('order-number').textContent = '#' + order.id;
            
            // Парсим дату напрямую из строки (в БД уже московское время)
            const match = order.created_at.match(/(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})/);
            if (match) {
                const [, year, month, day, hours, minutes] = match;
                const months = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря'];
                const monthName = months[parseInt(month) - 1];
                document.getElementById('order-date').textContent = `${parseInt(day)} ${monthName} ${year} г. в ${hours}:${minutes}`;
            }
            
            document.getElementById('order-total').textContent = order.total.toLocaleString() + ' ₽';
            
            // Обновляем статус
            const statusElement = document.getElementById('order-status');
            const statusMap = {
                'pending': { text: 'Ожидает оплаты', color: '#fbbf24' },
                'processing': { text: 'В обработке', color: '#38bdf8' },
                'completed': { text: 'Выполнен', color: '#10b981' },
                'cancelled': { text: 'Отменён', color: '#ef4444' }
            };
            
            const status = statusMap[order.status] || statusMap['pending'];
            statusElement.textContent = status.text;
            statusElement.style.color = status.color;
        })
        .catch(error => {
            console.error('Ошибка загрузки заказа:', error);
            document.querySelector('.order-details').innerHTML = '<p style="color: #ef4444; text-align: center;">Не удалось загрузить информацию о заказе</p>';
        });
} else {
    // Если нет ID в URL, показываем ошибку
    document.querySelector('.order-details').innerHTML = '<p style="color: #ef4444; text-align: center;">Заказ не найден</p>';
}
</script>

<script src="js/config.js?v=16"></script>`n<script src="js/api-v14.js?v=16"></script>
<script src="js/cart.js?v=16"></script>

</body>
</html>
