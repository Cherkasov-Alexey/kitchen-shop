# ОТЧЕТ
## ПО РАЗРАБОТКЕ ВЕБ-САЙТА "SMARTCOOK - ИНТЕРНЕТ-МАГАЗИН КУХОННОЙ ТЕХНИКИ"

---

## СОДЕРЖАНИЕ

ВВЕДЕНИЕ	4

1 Постановка задачи	5
   1.1 Клиентская часть	5
   1.2 Технические требования	6

2 Верстка страниц веб-сайта	7
   2.1 Описание процесса верстки веб-сайта	7
      2.1.1 Планирование структуры	7
      2.1.2 Разработка макета и стилей	7
      2.1.3 Верстка HTML-структуры	8
      2.1.4 Реализация компонентов	8
      2.1.5 Интеграция JavaScript	8
   2.2 Содержание страниц клиентской части	9
   2.3 Демонстрация адаптивности дизайна	19

3 Реализация динамических форм	22
   3.1 Описание процесса создания динамических форм	22
      3.1.1 Форма регистрации	22
      3.1.2 Форма авторизации	23
      3.1.3 Форма добавления в корзину	24
      3.1.4 Форма оформления заказа	24
      3.1.5 Форма написания отзывов	25

4 Формирование структуры базы данных	26
   4.1 Таблица users (пользователи)	26
   4.2 Таблица categories (категории товаров)	27
   4.3 Таблица products (товары)	27
   4.4 Таблица favorites (избранное)	28
   4.5 Таблица cart (корзина)	29
   4.6 Таблица orders (заказы)	30
   4.7 Таблица order_items (товары в заказе)	31
   4.8 Таблица reviews (отзывы)	31

5 Процесс развертывания веб-сайта	33

ЗАКЛЮЧЕНИЕ	36

СПИСОК ИСПОЛЬЗОВАННЫХ ИСТОЧНИКОВ	37

---

## ВВЕДЕНИЕ

Разработка полнофункционального интернет-магазина требует комплексного подхода, включающего проектирование пользовательского интерфейса, создание серверной логики, организацию базы данных, обеспечение безопасности и масштабируемости системы. Современные технологии позволяют создавать высокопроизводительные и надёжные веб-приложения с использованием проверенных архитектурных паттернов и best practices индустрии. Процесс разработки веб-сайта включает проектирование интерфейса, программирование клиентской и серверной частей, работу с базами данных и развертывание на хостинге. В качестве серверной платформы широко применяется Node.js с фреймворком Express.js, а для хранения данных используются реляционные СУБД, такие как PostgreSQL.

Цель работы заключается в разработке веб-сайта интернет-магазина кухонной техники «SmartCook» с полным функционалом электронной коммерции, включая каталог товаров с фильтрацией по категориям, корзину покупок, систему избранного, систему заказов, систему отзывов с рейтингом и интеграцию с базой данных PostgreSQL.

Для достижения поставленной цели необходимо решить следующие задачи:
- описать функциональные требования к разрабатываемому веб-сайту;
- сверстать прототип веб-страниц;
- определить стили для разрабатываемого веб-сайта;
- реализовать динамические формы авторизации, регистрации, добавления товаров в корзину и избранное, оформления заказов;
- сформировать базу данных;
- развернуть разработанный веб-сайт на веб-сервере.

---

## 1 Постановка задачи

Разрабатываемый веб-сайт «SmartCook» представляет собой полнофункциональный интернет-магазин кухонной техники с расширенными возможностями для покупателей. Система построена на современном технологическом стеке и обеспечивает высокую производительность, безопасность и удобство использования.

### 1.1 Клиентская часть

Пользовательский интерфейс интернет-магазина включает следующие функциональные возможности:
- Главная страница с информацией о компании, популярными товарами и категориями продукции;
- Каталог товаров с фильтрацией по категориям и динамической загрузкой контента;
- Детальная страница товара с описанием, техническими характеристиками, галереей изображений, информацией о гарантии и отзывами покупателей;
- Корзина покупок с возможностью изменения количества товаров, удаления позиций и автоматического расчёта итоговой суммы;
- Система регистрации и авторизации пользователей с безопасным хешированием паролей через библиотеку bcrypt;
- Личный кабинет пользователя с историей заказов, отображением статусов и детальной информацией по каждому заказу;
- Форма оформления заказа с указанием контактной информации, адреса доставки и способа оплаты;
- Система избранного для сохранения понравившихся товаров;
- Раздел «Акции» с товарами со скидками;
- Система отзывов с рейтингом от 1 до 5 звезд и текстовым комментарием;
- Страница помощи с часто задаваемыми вопросами.

### 1.2 Технические требования

Система должна обеспечивать:
- Высокую производительность и отзывчивость интерфейса при работе с большим количеством данных;
- Безопасное хранение паролей с использованием bcrypt для хеширования;
- Надёжность работы базы данных PostgreSQL с установленными связями и ограничениями целостности;
- Адаптивный дизайн с корректным отображением на устройствах различных размеров;
- RESTful API архитектуру для взаимодействия клиента и сервера;
- Валидацию данных на клиентской и серверной стороне;
- Защиту от SQL-инъекций через параметризованные запросы;
- SPA-подобную навигацию с динамической загрузкой контента;
- Лайтбокс для полноэкранного просмотра изображений товаров;
- Удобный и интуитивно понятный пользовательский интерфейс.

---

## 2 Верстка страниц веб-сайта

Цель данного этапа заключается в создании визуальной структуры веб-сайта, разработке адаптивного дизайна и верстке всех необходимых страниц для клиентской части приложения.

### 2.1 Описание процесса верстки веб-сайта

Процесс верстки веб-сайта включал несколько этапов:

#### 2.1.1 Планирование структуры

На первом этапе была определена структура сайта и необходимые страницы. Для клиентской части были запланированы следующие страницы:

#### 2.1.1 Планирование структуры

На первом этапе была определена структура сайта и необходимые страницы. Для клиентской части были запланированы следующие страницы:
- Главная страница (index.html) – с информацией о компании, категориями и популярными товарами;
- Каталог товаров (catalog.html) – с фильтрацией по категориям и динамической загрузкой;
- Страница товара (product.html) – с детальным описанием, характеристиками и отзывами;
- Корзина (cart.html) – для просмотра добавленных товаров и оформления заказа;
- Избранное (favorites.html) – для сохранённых товаров;
- Акции (sales.html) – товары со скидками;
- Личный кабинет (profile.html) – для управления профилем и просмотра заказов;
- Авторизация (login.html) и регистрация (register.html);
- Страница успешного оформления заказа (order-success.html);
- Оформление заказа (checkout.html);
- Справка (help.html).

Итого: 12 HTML-страниц.

#### 2.1.2 Разработка макета и стилей

Был создан единый файл стилей style.css для клиентской части и дополнительные файлы auth.css для страниц авторизации/регистрации и profile.css для личного кабинета. В стилях использованы:
- CSS Grid и Flexbox для создания гибких макетов;
- CSS-переменные для удобного управления цветовой схемой;
- Media queries для адаптивности под три брейкпоинта (1024px, 768px, 480px);
- Плавные переходы (transition) и анимация (@keyframes) для улучшения UX;
- Backdrop-filter для эффекта матового стекла;
- Градиенты для создания современного визуального стиля.

Используется современная темная цветовая палитра с акцентами:
- Фон: градиентный переход от #0f172a до #1e293b с радиальными градиентами розового (#ec4899) и голубого (#06b6d4) цветов;
- Акцентные цвета: голубой #06b6d4, розовый #ec4899, синий фокус #0ea5e9;
- Карточки товаров: полупрозрачный фон rgba(30,41,59,0.95) с backdrop-filter;
- Типографика: шрифт Segoe UI, размеры от 14px до 48px.

#### 2.1.3 Верстка HTML-структуры

Каждая страница была размечена семантичными HTML5-тегами:
- &lt;header&gt; для шапки сайта с навигацией и иконкой корзины;
- &lt;main&gt; для основного контента;
- &lt;section&gt; для логических блоков (баннер, категории, товары);
- &lt;footer&gt; для подвала с контактной информацией и ссылками;
- &lt;form&gt; для интерактивных форм с валидацией.

#### 2.1.4 Реализация компонентов

Созданы переиспользуемые компоненты:
- Шапка сайта (header) с логотипом, навигационным меню, индикатором корзины и кнопками авторизации;
- Подвал (footer) с информацией о компании, ссылками на разделы и контактами;
- Карточки товаров с изображением, ценой, кнопками добавления в корзину и избранное;
- Система уведомлений для отображения успешных действий и ошибок через функции showError() и showNotification();
- Лайтбокс для полноэкранного просмотра изображений товаров;
- Формы с клиентской валидацией.

#### 2.1.5 Интеграция JavaScript

Разработаны скрипты для динамической загрузки контента:
- config.js – конфигурация API для взаимодействия с сервером;
- main.js – главный скрипт с общими функциями;
- auth.js – авторизация и регистрация пользователей;
- catalog.js – логика каталога с фильтрацией по категориям;
- cart.js – управление корзиной покупок (добавление, изменение количества, удаление);
- cart-render.js – отрисовка корзины;
- favorites.js – управление избранным;
- product.js – детальная страница товара с отзывами;
- reviews.js – система отзывов с рейтингом;
- sales.js – страница товаров со скидками;
- checkout.js – оформление заказа;
- api-v14.js – модуль для работы с API.

### 2.2 Содержание страниц клиентской части

В процессе разработки были созданы следующие ключевые страницы.

**Главная страница (index.html)** – содержит hero-баннер с призывом к действию, раздел с категориями товаров (Холодильники, Кофемашины, Посудомоечные машины), блок популярных товаров с динамической загрузкой из API, информацию о компании SmartCook. Реализована загрузка динамического контента при помощи JavaScript. Страница изображена на рисунках 1, 2 и 3.

```
[Здесь должен быть Рисунок 1 – Главная страница часть 1]
```
*Отображение hero-баннера с градиентным фоном, логотипом SmartCook с анимацией свечения, навигационным меню, иконкой корзины с счётчиком товаров*

```
[Здесь должен быть Рисунок 2 – Главная страница часть 2]
```
*Раздел категорий товаров с карточками, содержащими изображения и названия категорий (Холодильники, Кофемашины, Посудомоечные машины), раздел популярных товаров с сеткой 3x3*

```
[Здесь должен быть Рисунок 3 – Главная страница часть 3]
```
*Блок «О компании SmartCook» с описанием миссии компании, футер с контактной информацией и ссылками на разделы сайта*

На последующих рисунках страниц не будет отображаться шапка (header) и подвал (footer) страницы, так как везде он имеет одинаковое отображение.

**Каталог товаров (catalog.html)** – отображает все товары интернет-магазина в виде сетки карточек с возможностью фильтрации по категориям через кнопки-фильтры. Каждая карточка товара содержит изображение, название, цену (с зачеркнутой старой ценой при наличии скидки), кнопки «В корзину» и «В избранное» (иконка сердца). Реализована динамическая загрузка товаров из базы данных через REST API. Страница изображена на рисунке 4.

```
[Здесь должен быть Рисунок 4 – Страница каталога]
```
*Сетка товаров 3x3 с карточками, фильтры по категориям в виде кнопок, отображение товаров с ценами и кнопками действий*

**Детальная страница товара (product.html)** – отображает полную информацию о конкретном товаре: галерею изображений с миниатюрами для переключения, название товара, цену (с зачеркнутой старой ценой при скидке), подробное описание, технические характеристики в виде списка, информацию о гарантии, кнопки «Добавить в корзину» и «В избранное». Ниже расположен раздел отзывов покупателей с рейтингом в виде звёзд (1-5) и текстом отзыва, а также форма для добавления собственного отзыва (доступна авторизованным пользователям). Реализован лайтбокс для полноэкранного просмотра изображений. Страница изображена на рисунке 5.

```
[Здесь должен быть Рисунок 5 – Детальная страница товара]
```
*Галерея изображений товара с миниатюрами, блок с ценой и кнопками действий, вкладки «Описание», «Характеристики», «Гарантия», раздел отзывов с рейтингом*

**Страница акций (sales.html)** – отображает товары со скидками (у которых заполнено поле old_price в базе данных). Карточки товаров содержат старую цену (зачеркнутую) и новую цену с выделением. Страница изображена на рисунке 6.

```
[Здесь должен быть Рисунок 6 – Страница акций]
```
*Сетка товаров со скидками, на каждой карточке отображается процент скидки, старая и новая цена*

**Корзина покупок (cart.html)** – показывает список добавленных товаров в виде таблицы с колонками: изображение, название, цена, количество (с кнопками + и - для изменения), стоимость, кнопка удаления. Внизу отображается блок с итоговой суммой заказа и кнопкой «Оформить заказ». При пустой корзине выводится сообщение «Ваша корзина пуста» и кнопка «Перейти в каталог». Страница корзины изображена на рисунке 7.

```
[Здесь должен быть Рисунок 7 – Корзина товаров]
```
*Таблица с товарами в корзине, кнопки изменения количества, блок с итоговой суммой справа, кнопка «Оформить заказ»*

**Форма оформления заказа (checkout.html)** – двухколоночный макет: слева форма с полями для ввода контактных данных (имя, телефон, email, адрес доставки), выбор способа оплаты (Картой онлайн / При получении), поле для комментария; справа – сводка заказа со списком товаров, количеством, ценами и итоговой суммой. При нажатии кнопки «Оформить заказ» выполняется валидация полей, отправка данных на сервер и перенаправление на страницу успешного оформления. Форма заполнения данных заказа изображена на рисунке 8.

```
[Здесь должен быть Рисунок 8 – Форма оформления заказа]
```
*Двухколоночный макет: слева форма с валидацией полей, справа сводка заказа с товарами и итоговой суммой*

**Страница успешного оформления заказа (order-success.html)** – отображает сообщение об успешном оформлении заказа. Страница содержит блок с деталями заказа, который включает номер заказа, дату оформления, сумму заказа и статус («Ожидает оплаты»). Данные загружаются динамически с сервера через JavaScript при наличии параметра id в URL. Ниже расположен блок «Что дальше?» с информацией о следующих шагах, а также кнопки «Вернуться в профиль», «Вернуться на главную» и «Продолжить покупки». Страница имеет анимированную иконку галочки при загрузке. Страница изображена на рисунке 9.

```
[Здесь должен быть Рисунок 9 – Страница успешного заказа]
```
*Центрированное сообщение об успешном оформлении с анимацией галочки, блок с деталями заказа (номер, дата, сумма, статус), раздел «Что дальше?», кнопки навигации*

**Личный кабинет (profile.html)** – предоставляет доступ к информации о пользователе (имя, email, дата регистрации) и истории заказов. История заказов отображается в виде карточек с номером заказа, датой, статусом (в обработке, выполнен, отменён), списком товаров и общей суммой. Реализована возможность просмотра деталей каждого заказа. Страница личного кабинета изображена на рисунке 10.

```
[Здесь должен быть Рисунок 10 – Личный кабинет пользователя]
```
*Блок с информацией о пользователе, раздел истории заказов с карточками, отображение статусов заказов с цветовыми индикаторами*

**Страница избранного (favorites.html)** – отображает товары, добавленные пользователем в избранное. Карточки товаров аналогичны каталогу, но с активной иконкой сердца. Кнопка «Добавить в корзину» позволяет быстро переместить товар из избранного в корзину. При пустом избранном выводится сообщение и кнопка перехода в каталог. Страница изображена на рисунке 11.

```
[Здесь должен быть Рисунок 11 – Страница избранного]
```
*Сетка избранных товаров с активными иконками сердца, кнопки добавления в корзину*

**Страница авторизации (login.html)** – форма входа с валидацией полей email (проверка формата) и password (обязательное поле). После успешного входа пользователь перенаправляется на главную страницу, данные пользователя сохраняются на клиенте для последующих запросов. При ошибке отображается уведомление «Неверный email или пароль». Внизу формы ссылка на страницу регистрации. Форма входа изображена на рисунке 12.

```
[Здесь должен быть Рисунок 12 – Форма входа в аккаунт]
```
*Центрированная форма на темном градиентном фоне с полями email и пароль, кнопка «Войти», ссылка «Нет аккаунта? Зарегистрироваться»*

**Страница регистрации (register.html)** – форма создания нового аккаунта с полями: имя (обязательное), email (с валидацией формата и проверкой уникальности), пароль (минимум 6 символов). После успешной регистрации пользователь автоматически авторизуется и перенаправляется на главную страницу. При попытке зарегистрироваться с существующим email выводится ошибка «Пользователь с таким email уже существует». Форма создания аккаунта изображена на рисунке 13.

```
[Здесь должен быть Рисунок 13 – Форма регистрации аккаунта]
```
*Форма регистрации с полями имя, email, пароль, кнопка «Создать аккаунт», ссылка «Уже есть аккаунт? Войти»*

**Страница справки (help.html)** – содержит информацию о доставке, оплате, возврате товаров, гарантии, контактные данные для связи. Оформлена в виде блоков с заголовками и текстовым контентом. Страница изображена на рисунке 14.

```
[Здесь должен быть Рисунок 14 – Страница справки]
```
*Блоки с FAQ, информацией о доставке, оплате, возврате, контактными данными*

### 2.3 Демонстрация адаптивности дизайна

Все страницы веб-сайта адаптированы для различных размеров экранов с использованием media queries с тремя основными брейкпоинтами:

**Для компьютера (ширина > 1024px):**
- Сетка товаров: 3 колонки (grid-template-columns: repeat(3, 1fr));
- Полная навигация в header с горизонтальным меню;
- Двухколоночный макет формы оформления заказа;
- Широкие карточки товаров с большими изображениями;
- Отступы padding: 16px 40px в header.

Изображение страницы каталога для примера на рисунке 15.

```
[Здесь должен быть Рисунок 15 – Каталог при ширине больше 1024px]
```
*Сетка товаров в 3 колонки, полное меню навигации, широкие карточки товаров*

**Для планшета (ширина 768px – 1024px):**
```css
@media (max-width: 1024px) {
    .product-list {
        grid-template-columns: repeat(2, 1fr); /* 2 колонки */
    }
    .header {
        padding: 12px 20px;
    }
    .nav a {
        margin-left: 20px;
        font-size: 14px;
    }
}
```
- Сетка товаров: 2 колонки;
- Уменьшенные отступы в header (padding: 12px 20px);
- Компактная навигация с уменьшенным шрифтом (14px);
- Форма оформления заказа остаётся двухколоночной.

Изображение страницы каталога для примера на рисунке 16.

```
[Здесь должен быть Рисунок 16 – Каталог при ширине 768px – 1024px]
```
*Сетка товаров в 2 колонки, компактное меню, адаптированные размеры элементов*

**Для телефона (ширина < 768px):**
```css
@media (max-width: 768px) {
    .header {
        flex-direction: column;
        height: auto;
        padding: 15px;
    }
    .product-list {
        grid-template-columns: 1fr; /* 1 колонка */
    }
    .nav {
        flex-direction: column;
        gap: 12px;
        width: 100%;
    }
    .checkout-grid {
        grid-template-columns: 1fr; /* Форма и сводка друг под другом */
    }
    .banner h1 {
        font-size: 32px;
    }
}
```
- Сетка товаров: 1 колонка;
- Вертикальная компоновка header (flex-direction: column);
- Навигация в виде вертикального списка;
- Форма оформления заказа становится одноколоночной;
- Уменьшенные размеры заголовков (32px вместо 48px);
- Компактные карточки товаров (padding: 15px).

Изображение страницы каталога для примера на рисунке 17.

```
[Здесь должен быть Рисунок 17 – Каталог при ширине меньше 768px]
```
*Сетка товаров в 1 колонку, вертикальная навигация, увеличенные области нажатия для touch-устройств*

**Особенности адаптивной верстки:**
- Использование относительных единиц измерения (rem, em, %);
- Гибкие изображения с max-width: 100% и height: auto;
- CSS Grid с auto-fit для автоматической адаптации колонок;
- Flexbox для гибкой компоновки элементов;
- Touch-friendly интерфейс на мобильных устройствах (увеличенные области нажатия min-height: 44px);
- Адаптивная типографика с использованием calc() и vw/vh единиц;
- Viewport meta-tag для корректного масштабирования: &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;.

---

## 3 Реализация динамических форм

Цель данного этапа - создание интерактивных форм с клиентской валидацией данных, обработкой событий и отправкой данных на сервер через AJAX-запросы. Динамические формы обеспечивают удобное взаимодействие пользователя с системой без перезагрузки страницы.

### 3.1 Описание процесса создания динамических форм

В проекте реализованы следующие динамические формы:
- Форма регистрации (register.html);
- Форма авторизации (login.html);
- Форма добавления товаров в корзину и избранное;
- Форма оформления заказа (checkout.html);
- Форма написания отзывов (product.html).

Процесс разработки включал:
- Разметку HTML с использованием семантичных тегов &lt;form&gt;, &lt;input&gt;, &lt;textarea&gt;, &lt;button&gt;;
- Добавление атрибутов валидации HTML5 (required, type="email", type="tel", minlength, pattern);
- Написание JavaScript-обработчиков событий submit с preventDefault();
- Реализацию клиентской валидации перед отправкой данных;
- AJAX-запросы к REST API с использованием Fetch API;
- Обработку ответов сервера (response.ok, response.json());
- Показ уведомлений об успехе или ошибках через функцию showError();
- Сохранение данных пользователя на клиенте после успешной авторизации/регистрации.

#### 3.1.1 Форма регистрации

Форма регистрации включает в себя валидацию на клиентской и серверной стороне.

**HTML-разметка:**
```html
<form id="register-form" class="auth-form">
    <h1>Регистрация</h1>
    <input type="text" id="name" placeholder="Имя" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="password" id="password" placeholder="Пароль" required minlength="6">
    <button type="submit">Создать аккаунт</button>
    <p class="auth-link">
        Уже есть аккаунт? <a href="login.html">Войти</a>
    </p>
</form>
```

**JavaScript-обработка (auth.js):**
```javascript
registerForm.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;
    
    // Валидация на клиенте
    if (!name || !email || !password) {
        showError('Заполните все поля');
        return;
    }
    
    if (password.length < 6) {
        showError('Пароль должен содержать минимум 6 символов');
        return;
    }
    
    try {
        const response = await fetch(`${API_BASE_URL}/auth/register`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, email, password })
        });
        
        const data = await response.json();
        
        if (!response.ok) {
            showError(data.error || 'Ошибка регистрации');
            return;
        }
        
        // Сохранение данных пользователя на клиенте
        // ... код сохранения данных ...
        window.location.href = 'index.html';
    } catch (error) {
        showError('Ошибка соединения с сервером');
    }
});
```

**Серверная валидация (backend/src/index.js):**
```javascript
app.post('/api/auth/register', async (req, res) => {
    const { name, email, password } = req.body;
    
    // Проверка обязательных полей
    if (!name || !email || !password) {
        return res.status(400).json({ error: 'Все поля обязательны' });
    }
    
    // Проверка уникальности email
    const [existing] = await db.execute('SELECT id FROM users WHERE email = ?', [email]);
    if (existing.length > 0) {
        return res.status(400).json({ 
            error: 'Пользователь с таким email уже существует' 
        });
    }
    
    // Хеширование пароля
    const saltRounds = 10;
    const passwordHash = await bcrypt.hash(password, saltRounds);
    
    // Создание пользователя
    const [rows] = await db.execute(
        'INSERT INTO users (user_name, email, password_hash) VALUES (?, ?, ?) RETURNING *',
        [name, email, passwordHash]
    );
    
    res.status(201).json(rows[0]);
});
```

**Валидация формы регистрации:**
- Проверка заполнения всех полей (имя, email, пароль);
- Валидация email на корректный формат через HTML5 атрибут type="email";
- Проверка длины пароля (минимум 6 символов) через атрибут minlength и JavaScript;
- Серверная проверка уникальности email в базе данных;
- Безопасное хеширование пароля с помощью bcrypt (saltRounds = 10).

Работа валидации изображена на рисунках 18-20.

```
[Здесь должен быть Рисунок 18 – Валидация заполнения имени]
```
*При незаполненном поле имени выводится HTML5 сообщение «Заполните это поле»*

```
[Здесь должен быть Рисунок 19 – Валидация формата email]
```
*При неверном формате email выводится сообщение «Введите адрес электронной почты»*

```
[Здесь должен быть Рисунок 20 – Валидация длины пароля]
```
*При пароле меньше 6 символов: «Пароль должен содержать минимум 6 символов»*

При попытке зарегистрироваться с уже существующим email выводится ошибка, изображенная на рисунке 21.

```
[Здесь должен быть Рисунок 21 – Ошибка при существующем email]
```
*Красное уведомление: «Пользователь с таким email уже существует»*

#### 3.1.2 Форма авторизации

Форма авторизации содержит поля email и пароль с валидацией.

**HTML-разметка:**
```html
<form class="auth-form" id="login-form">
    <h1>Вход</h1>
    <input type="email" id="email" placeholder="Email" required>
    <input type="password" id="password" placeholder="Пароль" required>
    <button type="submit">Войти</button>
    <p class="error" id="error-msg"></p>
</form>
```

**JavaScript-обработка:**
```javascript
loginForm.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    
    if (!email || !password) {
        showError('Заполните все поля');
        return;
    }
    
    try {
        const response = await fetch(`${API_BASE_URL}/auth/login`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email, password })
        });
        
        const data = await response.json();
        
        if (!response.ok) {
            showError(data.error || 'Неверный email или пароль');
            return;
        }
        
        // Сохранение данных авторизации
        window.location.href = 'index.html';
    } catch (error) {
        showError('Ошибка соединения с сервером');
    }
});
```

**Валидация:**
- Проверка заполнения полей email и password;
- Проверка формата email через HTML5 атрибут type="email";
- Серверная проверка существования пользователя и сравнение хешированного пароля через bcrypt.compare();
- Обработка ошибок с выводом уведомлений.

Работа валидации изображена на рисунке 22.

```
[Здесь должен быть Рисунок 22 – Ошибка при неверных данных входа]
```
*При неверных данных выводится красное уведомление: «Неверный email или пароль»*

#### 3.1.3 Форма добавления в корзину

Динамическое добавление товара в корзину без перезагрузки страницы.

**JavaScript-реализация (cart.js, product.js):**
```javascript
async function addToCart(productId) {
    const user = getCurrentUser();
    if (!user) {
        window.location.href = 'login.html';
        return;
    }
    
    try {
        const response = await fetch(`${API_BASE_URL}/cart`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                user_id: user.id,
                product_id: productId,
                quantity: 1
            })
        });
        
        if (response.ok) {
            showNotification('Товар добавлен в корзину');
            updateCartCount(); // Обновление счётчика в header
        }
    } catch (error) {
        console.error('Ошибка добавления в корзину:', error);
    }
}
```

**Обновление количества товара:**
```javascript
async function updateQuantity(cartId, newQuantity) {
    if (newQuantity < 1) return;
    
    const response = await fetch(`${API_BASE_URL}/cart/${cartId}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ quantity: newQuantity })
    });
    
    if (response.ok) {
        loadCart(); // Перезагрузка корзины с новыми данными
    }
}
```

**Добавление в избранное:**
```javascript
async function toggleFavorite(productId) {
    const user = getCurrentUser();
    if (!user) {
        window.location.href = 'login.html';
        return;
    }
    
    const response = await fetch(`${API_BASE_URL}/favorites`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            user_id: user.id,
            product_id: productId
        })
    });
    
    if (response.ok) {
        showNotification('Товар добавлен в избранное');
    }
}
```

Работа функциона изображена на рисунке 23.

```
[Здесь должен быть Рисунок 23 – Уведомление о добавлении в корзину]
```
*Всплывающее зелёное уведомление: «Товар добавлен в корзину», счётчик на иконке корзины увеличивается*

#### 3.1.4 Форма оформления заказа

Форма с комплексной валидацией контактных данных и адреса доставки.

**HTML-разметка (checkout.html):**
```html
<form id="checkout-form">
    <div class="form-group">
        <label>Имя *</label>
        <input type="text" id="customer-name" required>
    </div>
    <div class="form-group">
        <label>Телефон *</label>
        <input type="tel" id="customer-phone" pattern="[0-9+\-\s()]+" required>
    </div>
    <div class="form-group">
        <label>Email *</label>
        <input type="email" id="customer-email" required>
    </div>
    <div class="form-group">
        <label>Адрес доставки *</label>
        <textarea id="delivery-address" rows="3" required></textarea>
    </div>
    <div class="payment-methods">
        <div class="payment-method selected" data-method="card">
            Картой онлайн
        </div>
        <div class="payment-method" data-method="cash">
            При получении
        </div>
    </div>
    <div class="form-group">
        <label>Комментарий к заказу</label>
        <textarea id="order-comment" rows="2"></textarea>
    </div>
    <button type="submit" class="submit-btn">Оформить заказ</button>
</form>
```

**JavaScript-обработка (checkout.js):**
```javascript
checkoutForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const name = document.getElementById('customer-name').value.trim();
    const phone = document.getElementById('customer-phone').value.trim();
    const email = document.getElementById('customer-email').value.trim();
    const address = document.getElementById('delivery-address').value.trim();
    
    // Валидация
    if (!name || !phone || !email || !address) {
        alert('Заполните все обязательные поля');
        return;
    }
    
    const phoneRegex = /^[0-9+\-\s()]+$/;
    if (!phoneRegex.test(phone)) {
        alert('Введите корректный номер телефона');
        return;
    }
    
    const orderData = {
        user_id: user.id,
        customer_name: name,
        customer_phone: phone,
        customer_email: email,
        delivery_address: address,
        payment_method: selectedPaymentMethod,
        comment: document.getElementById('order-comment').value
    };
    
    const response = await fetch(`${API_BASE_URL}/orders`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(orderData)
    });
    
    if (response.ok) {
        await clearCart(); // Очистка корзины после успешного заказа
        window.location.href = 'order-success.html';
    }
});
```

**Валидация формы оформления заказа:**
- HTML5 валидация: required для обязательных полей, type="email" для email, type="tel" для телефона;
- JavaScript валидация: проверка заполнения всех полей, проверка формата телефона через регулярное выражение;
- Интерактивный выбор способа оплаты с визуальным feedback;
- Автозаполнение данных из профиля пользователя (если авторизован).

Работа валидации изображена на рисунке 24.

```
[Здесь должен быть Рисунок 24 – Валидация формы оформления заказа]
```
*При незаполненных полях HTML5 подсвечивает обязательные поля, при неверном формате телефона выводится alert*

#### 3.1.5 Форма написания отзывов

Динамическая форма с рейтингом в виде звёзд и текстовым комментарием.

**HTML-разметка (product.html):**
```html
<div class="review-form">
    <h3>Написать отзыв</h3>
    <div class="rating-input">
        <span class="star" data-rating="1">★</span>
        <span class="star" data-rating="2">★</span>
        <span class="star" data-rating="3">★</span>
        <span class="star" data-rating="4">★</span>
        <span class="star" data-rating="5">★</span>
    </div>
    <textarea id="review-text" placeholder="Ваш отзыв..." rows="4"></textarea>
    <button onclick="submitReview()">Отправить отзыв</button>
</div>
```

**JavaScript-обработка (reviews.js):**
```javascript
let selectedRating = 0;

// Обработка выбора рейтинга
document.querySelectorAll('.star').forEach(star => {
    star.addEventListener('click', function() {
        selectedRating = parseInt(this.dataset.rating);
        updateStars(selectedRating);
    });
    
    star.addEventListener('mouseenter', function() {
        const hoverRating = parseInt(this.dataset.rating);
        updateStars(hoverRating);
    });
});

function updateStars(rating) {
    document.querySelectorAll('.star').forEach((star, index) => {
        if (index < rating) {
            star.classList.add('active');
        } else {
            star.classList.remove('active');
        }
    });
}

async function submitReview() {
    const user = getCurrentUser();
    if (!user) {
        window.location.href = 'login.html';
        return;
    }
    
    const reviewText = document.getElementById('review-text').value.trim();
    
    if (!selectedRating || !reviewText) {
        alert('Выберите рейтинг и напишите отзыв');
        return;
    }
    
    const response = await fetch(`${API_BASE_URL}/reviews`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            user_id: user.id,
            product_id: productId,
            rating: selectedRating,
            text: reviewText
        })
    });
    
    if (response.ok) {
        loadReviews(); // Перезагрузка списка отзывов
        document.getElementById('review-text').value = '';
        selectedRating = 0;
        updateStars(0);
        alert('Спасибо за ваш отзыв!');
    }
}
```

**Валидация формы отзывов:**
- Проверка авторизации пользователя перед отправкой отзыва;
- Проверка выбора рейтинга (от 1 до 5 звёзд);
- Проверка заполнения текстового поля отзыва;
- Интерактивное выделение звёзд при наведении и клике.

Работа формы изображена на рисунке 25.

```
[Здесь должен быть Рисунок 25 – Форма написания отзыва]
```
*Интерактивные звезды, при наведении подсвечиваются золотым цветом, текстовое поле для отзыва, кнопка отправки*

---

## 4 Формирование структуры базы данных

Цель данного этапа – проектирование и реализация реляционной базы данных для хранения информации о товарах, категориях, пользователях, заказах и других данных интернет-магазина. База данных должна обеспечивать целостность данных, производительность запросов и возможность масштабирования.

Для проекта используется СУБД **PostgreSQL 18**. В процессе проектирования были созданы **8 взаимосвязанных таблиц**, обеспечивающих полный функционал интернет-магазина с установленными ограничениями целостности (foreign keys, unique constraints, cascades).

### 4.1 Таблица users (пользователи)

**Структура таблицы:**
```sql
CREATE TABLE IF NOT EXISTS users (
  id SERIAL PRIMARY KEY,
  user_name VARCHAR(100) NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  created_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour')
);
```

**Поля:**
- id – уникальный идентификатор пользователя (автоинкремент);
- user_name – имя пользователя;
- email – адрес электронной почты (уникальный, используется для входа);
- password_hash – хешированный пароль с использованием bcrypt (saltRounds = 10);
- created_at – дата и время регистрации в часовом поясе МСК (UTC+3).

**Ограничения:**
- PRIMARY KEY (id) – уникальность идентификатора;
- UNIQUE (email) – защита от дублирования email адресов;
- NOT NULL – обязательность всех полей кроме даты создания.

**Назначение:** хранение информации о зарегистрированных пользователях интернет-магазина с безопасным хешированием паролей.

```
[Здесь должен быть Рисунок 26 – Таблица users в PostgreSQL]
```
*Скриншот таблицы users из pgAdmin с примерами данных: id, user_name, email, password_hash (bcrypt), created_at*

### 4.2 Таблица categories (категории товаров)

**Структура таблицы:**
```sql
CREATE TABLE IF NOT EXISTS categories (
  id SERIAL PRIMARY KEY,
  category_name VARCHAR(255) NOT NULL UNIQUE
);
```

**Поля:**
- id – уникальный идентификатор категории;
- category_name – название категории.

**Ограничения:**
- PRIMARY KEY (id);
- UNIQUE (category_name) – предотвращение дублирования названий категорий.

**Данные:** Холодильники, Кофемашины, Посудомоечные машины.

**Назначение:** классификация товаров по типам для фильтрации в каталоге.

```
[Здесь должен быть Рисунок 27 – Таблица categories в PostgreSQL]
```
*Скриншот таблицы categories: три записи с id и названиями категорий*

### 4.3 Таблица products (товары)

**Структура таблицы:**
```sql
CREATE TABLE IF NOT EXISTS products (
  id SERIAL PRIMARY KEY,
  product_name VARCHAR(255) NOT NULL,
  old_price NUMERIC(10,2),
  price NUMERIC(10,2) NOT NULL,
  description TEXT,
  specifications TEXT,
  warranty TEXT,
  images TEXT,
  category_id INT REFERENCES categories(id) ON DELETE SET NULL,
  created_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour')
);
```

**Поля:**
- id – уникальный идентификатор товара;
- product_name – название товара;
- old_price – старая цена (для товаров со скидкой, может быть NULL);
- price – текущая цена товара (обязательное поле);
- description – подробное описание товара;
- specifications – технические характеристики;
- warranty – информация о гарантии;
- images – пути к изображениям товара (через запятую: "images/holodilnik_1/holodilnik_1_1.png,images/holodilnik_1/holodilnik_1_2.png");
- category_id – внешний ключ на таблицу categories;
- created_at – дата добавления товара (МСК).

**Связи:**
- FOREIGN KEY (category_id) REFERENCES categories(id) ON DELETE SET NULL – при удалении категории товар остаётся в базе, но category_id становится NULL.

**Назначение:** основная таблица с информацией о товарах интернет-магазина, включая цены, описания, характеристики и связь с категориями.

```
[Здесь должен быть Рисунок 28 – Таблица products в PostgreSQL]
```
*Скриншот таблицы products с полями: id, product_name, old_price (NULL для товаров без скидки), price, description, specifications, warranty, images, category_id, created_at*

### 4.4 Таблица favorites (избранное)

**Структура таблицы:**
```sql
CREATE TABLE IF NOT EXISTS favorites (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  product_id INT NOT NULL REFERENCES products(id) ON DELETE CASCADE,
  added_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour'),
  UNIQUE (user_id, product_id)
);
```

**Поля:**
- id – уникальный идентификатор записи;
- user_id – внешний ключ на пользователя;
- product_id – внешний ключ на товар;
- added_at – дата и время добавления в избранное.

**Связи:**
- FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE – при удалении пользователя удаляются все его избранные товары;
- FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE – при удалении товара удаляются все записи об этом товаре в избранном;
- UNIQUE (user_id, product_id) – пользователь не может добавить один и тот же товар в избранное дважды.

**Назначение:** хранение избранных товаров пользователей для последующей покупки.

```
[Здесь должен быть Рисунок 29 – Таблица favorites в PostgreSQL]
```
*Скриншот таблицы favorites: связь пользователей с товарами, added_at*

### 4.5 Таблица cart (корзина)

**Структура таблицы:**
```sql
CREATE TABLE IF NOT EXISTS cart (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  product_id INT NOT NULL REFERENCES products(id) ON DELETE CASCADE,
  quantity INT NOT NULL DEFAULT 1,
  total NUMERIC(10,2) NOT NULL,
  added_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour'),
  UNIQUE (user_id, product_id)
);
```

**Поля:**
- id – уникальный идентификатор записи в корзине;
- user_id – внешний ключ на пользователя;
- product_id – внешний ключ на товар;
- quantity – количество единиц товара (по умолчанию 1);
- total – общая стоимость позиции (quantity × price, рассчитывается на сервере);
- added_at – дата добавления в корзину.

**Связи:**
- FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE;
- FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE;
- UNIQUE (user_id, product_id) – один товар может быть добавлен в корзину пользователя только один раз (количество регулируется через quantity).

**Назначение:** временное хранение товаров в корзине до оформления заказа.

```
[Здесь должен быть Рисунок 30 – Таблица cart в PostgreSQL]
```
*Скриншот таблицы cart: user_id, product_id, quantity, total, added_at*

### 4.6 Таблица orders (заказы)

**Структура таблицы:**
```sql
CREATE TABLE IF NOT EXISTS orders (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  total NUMERIC(10,2) NOT NULL,
  email VARCHAR(255),
  phone VARCHAR(20),
  delivery_address TEXT,
  status VARCHAR(32) DEFAULT 'pending',
  payment_method VARCHAR(64),
  comment TEXT,
  customer_name VARCHAR(255),
  customer_phone VARCHAR(50),
  customer_email VARCHAR(255),
  created_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour'),
  updated_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour')
);
```

**Поля:**
- id – уникальный номер заказа;
- user_id – внешний ключ на пользователя, оформившего заказ;
- total – итоговая сумма заказа;
- email, phone – контактные данные (дублирование из профиля);
- delivery_address – адрес доставки;
- status – статус заказа (pending – в обработке, processing – обрабатывается, completed – выполнен, cancelled – отменён);
- payment_method – способ оплаты (card – картой онлайн, cash – при получении);
- comment – комментарий покупателя к заказу;
- customer_name, customer_phone, customer_email – контактные данные покупателя на момент заказа;
- created_at – дата создания заказа;
- updated_at – дата последнего обновления.

**Связи:**
- FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE.

**Назначение:** хранение информации обо всех оформленных заказах в системе.

```
[Здесь должен быть Рисунок 31 – Таблица orders в PostgreSQL]
```
*Скриншот таблицы orders: id, user_id, total, customer_name, customer_phone, status, created_at*

### 4.7 Таблица order_items (товары в заказе)

**Структура таблицы:**
```sql
CREATE TABLE IF NOT EXISTS order_items (
  id SERIAL PRIMARY KEY,
  order_id INT NOT NULL REFERENCES orders(id) ON DELETE CASCADE,
  product_id INT NOT NULL REFERENCES products(id),
  quantity INT NOT NULL,
  price NUMERIC(10,2) NOT NULL
);
```

**Поля:**
- id – уникальный идентификатор записи;
- order_id – внешний ключ на заказ;
- product_id – внешний ключ на товар;
- quantity – количество единиц товара в заказе;
- price – цена товара на момент оформления заказа (фиксация цены для истории).

**Связи:**
- FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE CASCADE – при удалении заказа удаляются все его товары;
- FOREIGN KEY (product_id) REFERENCES products(id) – связь с товаром без каскадного удаления (товар может быть удалён из каталога, но останется в истории заказов).

**Назначение:** связь заказов с товарами (отношение многие-ко-многим), хранение состава каждого заказа с фиксацией цен на момент покупки.

```
[Здесь должен быть Рисунок 32 – Таблица order_items в PostgreSQL]
```
*Скриншот таблицы order_items: order_id, product_id, quantity, price (зафиксированная цена)*

### 4.8 Таблица reviews (отзывы)

**Структура таблицы:**
```sql
CREATE TABLE IF NOT EXISTS reviews (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL REFERENCES users(id),
  product_id INT NOT NULL REFERENCES products(id),
  rating INT NOT NULL,
  text TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour')
);
```

**Поля:**
- id – уникальный идентификатор отзыва;
- user_id – внешний ключ на пользователя, оставившего отзыв;
- product_id – внешний ключ на товар;
- rating – оценка товара от 1 до 5 звёзд (целое число);
- text – текст отзыва;
- created_at – дата и время создания отзыва.

**Связи:**
- FOREIGN KEY (user_id) REFERENCES users(id);
- FOREIGN KEY (product_id) REFERENCES products(id).

**Назначение:** хранение отзывов пользователей о товарах с рейтингом и текстовым комментарием.

```
[Здесь должен быть Рисунок 33 – Таблица reviews в PostgreSQL]
```
*Скриншот таблицы reviews: user_id, product_id, rating (1-5), text, created_at*

**Диаграмма связей таблиц (ER-диаграмма):**

```
┌──────────┐
│  users   │──┐
└──────────┘  │
              ├─── favorites ───┐
              │                  │
              ├─── cart ─────────┤
              │                  │
              ├─── orders        │         ┌─────────────┐
              │      │           │         │ categories  │
              │      └─── order_items ───┼──┐            │
              │                  │        │  └─────────────┘
              └─── reviews ──────┤        │
                                 │        │
                         ┌───────────┐    │
                         │ products  │────┘
                         └───────────┘
```

---

## 5 Процесс развертывания веб-сайта

Цель данного этапа – развертывание веб-сайта на сервере с обеспечением его доступности через интернет и настройкой всех необходимых компонентов для стабильной работы приложения.

Для развёртывания проекта была выбрана облачная платформа **Render.com** с managed PostgreSQL.

**Преимущества Render.com:**
- Бесплатный план для небольших проектов (Free tier);
- Автоматический деплой из GitHub репозитория при каждом push в ветку main;
- Managed PostgreSQL – управляемая база данных с автоматическими резервными копиями;
- SSL-сертификаты из коробки (HTTPS) через Let's Encrypt;
- Географическое расположение – Frankfurt (низкая латентность для Европы и России);
- Простая конфигурация через файл render.yaml;
- Автоматическое масштабирование и балансировка нагрузки;
- Встроенное логирование и мониторинг сервисов;
- Zero-downtime deployment – обновление без простоя.

**Процесс развёртывания включал следующие этапы:**

**Этап 1. Подготовка проекта**

Создание конфигурационного файла **render.yaml** в корне проекта:
```yaml
services:
  - type: web
    name: kitchen-shop
    env: node
    plan: free
    region: frankfurt
    buildCommand: npm install
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: DATABASE_URL
        sync: false
```

Параметры конфигурации:
- type: web – тип сервиса (веб-приложение);
- env: node – окружение Node.js;
- plan: free – бесплатный тарифный план;
- region: frankfurt – регион развёртывания (дата-центр во Франкфурте);
- buildCommand – команда для установки зависимостей;
- startCommand – команда запуска приложения;
- DATABASE_URL – переменная окружения для строки подключения к PostgreSQL.

Настройка **package.json:**
```json
{
  "name": "kitchen-shop",
  "version": "1.0.0",
  "main": "backend/src/index.js",
  "scripts": {
    "start": "node backend/src/index.js"
  },
  "engines": {
    "node": ">=18.0.0"
  },
  "dependencies": {
    "express": "^4.18.2",
    "pg": "^8.11.0",
    "bcrypt": "^6.0.0",
    "cors": "^2.8.5"
  }
}
```

**Этап 2. Создание PostgreSQL базы данных на Render**

1. Вход в панель управления Render → New → PostgreSQL;
2. Указание параметров базы данных:
   - Name: kitchen-shop-db
   - Database: kitchen_shop
   - User: postgres (по умолчанию)
   - Region: Frankfurt
   - PostgreSQL Version: 18
   - Plan: Free (256MB RAM, 1GB storage)
3. После создания получение строки подключения (Connection String):
   ```
   postgres://username:password@dpg-xxxxx-frankfurt-postgres.render.com/kitchen_shop
   ```
4. Копирование Internal Database URL для использования в приложении.

**Этап 3. Инициализация базы данных**

Выполнение SQL-скрипта database/schema_pg.sql через Render Dashboard:
1. Переход во вкладку "Shell" созданной БД;
2. Подключение к базе данных: `psql $DATABASE_URL`;
3. Выполнение скрипта создания таблиц и заполнения начальными данными.

Результат выполнения:
```
CREATE TABLE users
CREATE TABLE categories
CREATE TABLE products
CREATE TABLE favorites
CREATE TABLE cart
CREATE TABLE orders
CREATE TABLE order_items
CREATE TABLE reviews
INSERT 0 3  (categories)
INSERT 0 9  (products)
```

**Этап 4. Развёртывание веб-сервиса**

1. Загрузка исходного кода в GitHub репозиторий:
   ```bash
   git init
   git add .
   git commit -m "Initial commit: SmartCook kitchen shop"
   git remote add origin https://github.com/username/kitchen-shop.git
   git push -u origin main
   ```

2. Создание Web Service на Render:
   - Dashboard → New → Web Service;
   - Connect Repository: выбор kitchen-shop из списка GitHub репозиториев;
   - Render автоматически обнаруживает render.yaml;
   - Указание переменной окружения DATABASE_URL (Internal Database URL из этапа 2);
   - Нажатие "Create Web Service".

3. Автоматическое выполнение Render:
   ```bash
   ==> Cloning from https://github.com/username/kitchen-shop...
   ==> Running build command 'npm install'...
       added 57 packages in 8.2s
   ==> Starting service with 'npm start'...
       > kitchen-shop@1.0.0 start
       > node backend/src/index.js
       
       Server running on port 10000
       Using DATABASE_URL for Postgres connection
       PostgreSQL connection established
       Database has 9 products
   ```

4. После успешного деплоя сайт доступен по URL:
   ```
   https://kitchen-shop-l4jl.onrender.com
   ```

**Этап 5. Настройка автоматического деплоя**

При каждом `git push` в ветку `main` Render автоматически:
1. Клонирует новый код из репозитория;
2. Выполняет buildCommand (`npm install`);
3. Запускает startCommand (`npm start`);
4. Переключает трафик на новую версию без даунтайма (zero-downtime deployment);
5. Старая версия остаётся активной до успешного запуска новой.

**Этап 6. Проверка работоспособности**

Health Check endpoint для мониторинга:
```bash
curl https://kitchen-shop-l4jl.onrender.com/health
```

Ответ сервера:
```json
{
  "status": "healthy",
  "database": "connected",
  "environment": "production",
  "timestamp": "2026-01-12T11:45:32.123Z"
}
```

**Доменное имя:** [kitchen-shop-l4jl.onrender.com](https://kitchen-shop-l4jl.onrender.com)

Работа сайта на домене продемонстрирована на рисунке 34.

```
[Здесь должен быть Рисунок 34 – Работа сайта на домене]
```
*Скриншот браузера с адресной строкой:*
```
https://kitchen-shop-l4jl.onrender.com
🔒 Защищено | Сертификат действителен
```
*Отображение главной страницы SmartCook с логотипом, баннером, категориями и товарами*

**SSL-сертификат:**
Render автоматически предоставляет SSL-сертификат от Let's Encrypt. Сайт доступен только по HTTPS, HTTP-запросы автоматически перенаправляются на HTTPS. Сертификат действителен до 2027 года и автоматически обновляется.

```
[Здесь должен быть Рисунок 35 – SSL-сертификат]
```
*Скриншот информации о сертификате: выдан Let's Encrypt, действителен до 2027, шифрование TLS 1.3*

**Логи сервера (Render Dashboard):**
```
2026-01-12T11:42:15.321Z [INFO] GET /
2026-01-12T11:42:16.122Z [INFO] GET /api/categories
2026-01-12T11:42:16.245Z [INFO] GET /api/products?featured=true&limit=6
2026-01-12T11:43:02.544Z [INFO] POST /api/auth/register
2026-01-12T11:43:45.782Z [INFO] POST /api/cart
2026-01-12T11:44:12.334Z [INFO] POST /api/orders
2026-01-12T11:44:12.456Z [INFO] DELETE /api/cart/1
```

**Доказательства работы:**
- ✅ Главная страница загружается с динамическим контентом;
- ✅ Каталог отображает товары из базы данных PostgreSQL;
- ✅ Регистрация и авторизация работают с хешированием паролей bcrypt;
- ✅ Добавление в корзину и избранное функционирует корректно;
- ✅ Оформление заказа создает записи в таблицах orders и order_items;
- ✅ Система отзывов сохраняет и отображает рейтинги;
- ✅ SSL-сертификат активен (HTTPS с замком в адресной строке);
- ✅ Адаптивный дизайн работает на мобильных устройствах;
- ✅ API отвечает корректными JSON-данными.

---

## ЗАКЛЮЧЕНИЕ

В ходе выполнения данной работы был разработан полнофункциональный веб-сайт интернет-магазина кухонной техники «SmartCook» с современным дизайном, адаптивной версткой и полным циклом электронной коммерции.

**Достигнутые результаты:**

Были определены функциональные требования к интернет-магазину, включающие клиентскую часть с каталогом товаров, фильтрацией по категориям, корзиной, авторизацией, личным кабинетом, системой избранного, системой отзывов с рейтингом от 1 до 5 звезд.

Создано 12 страниц клиентской части с адаптивным дизайном, корректно отображающимся на устройствах различных размеров (десктоп, планшет, мобильные). Использованы HTML5, CSS3 с применением Grid и Flexbox для создания современных макетов. Реализована темная цветовая палитра с градиентами, эффектами свечения, backdrop-filter и плавными анимациями для улучшения пользовательского опыта.

Реализованы интерактивные динамические формы с многоуровневой валидацией: HTML5-атрибуты (required, type="email", pattern), JavaScript-проверки на клиенте и серверная валидация с обработкой ошибок. Формы включают регистрацию с проверкой уникальности email, авторизацию с bcrypt-хешированием паролей, добавление в корзину и избранное, оформление заказов с валидацией контактных данных, систему отзывов с интерактивным выбором рейтинга.

Спроектирована и реализована нормализованная структура БД PostgreSQL с 8 таблицами (users, categories, products, favorites, cart, orders, order_items, reviews), внешними ключами (foreign keys), каскадными удалениями (ON DELETE CASCADE), ограничениями уникальности (UNIQUE constraints). База данных обеспечивает целостность данных и поддерживает все функции интернет-магазина. Реализована фиксация цен в таблице order_items для сохранения истории заказов.

Сайт успешно развёрнут на облачной платформе Render.com с автоматическим деплоем из GitHub, managed PostgreSQL с резервным копированием, SSL-сертификатом от Let's Encrypt и публичным доступом по адресу kitchen-shop-l4jl.onrender.com. Настроено автоматическое развёртывание при каждом push в репозиторий с zero-downtime deployment.

Разработанный веб-сайт может использоваться как реальный коммерческий проект для продажи кухонной техники. Архитектура приложения позволяет легко масштабировать функциональность: добавление новых категорий товаров, интеграция платёжных систем (Stripe, PayPal), создание административной панели для управления контентом, реализация системы уведомлений по email, добавление чат-бота для поддержки клиентов.

Приобретенные навыки:
- Современная веб-разработка на стеке HTML5/CSS3/JavaScript (ES6+) + Node.js/Express.js;
- Проектирование и нормализация реляционных баз данных;
- Работа с PostgreSQL и управляемыми облачными СУБД;
- Разработка RESTful API с аутентификацией и валидацией данных;
- Обеспечение безопасности веб-приложений (bcrypt, параметризованные запросы, CORS);
- Адаптивная верстка с использованием CSS Grid, Flexbox и Media Queries;
- Деплой full-stack приложений на облачных платформах (Render.com);
- Работа с Git и GitHub для контроля версий и автоматического развертывания;
- Разработка SPA-подобных приложений с динамической загрузкой контента.

Все поставленные задачи выполнены в полном объеме, веб-сайт готов к использованию и дальнейшему развитию.

---

## СПИСОК ИСПОЛЬЗОВАННЫХ ИСТОЧНИКОВ

1. Node.js [Электронный ресурс] : офиц. документация / Node.js Foundation. – Режим доступа: https://nodejs.org/docs/latest/api/, свободный. – Загл. с экрана. – (Дата обращения: 10.01.2026).

2. Express [Электронный ресурс] : руководство / Express Team. – Режим доступа: https://expressjs.com/en/guide/database-integration.html, свободный. – Загл. с экрана. – (Дата обращения: 10.01.2026).

3. PostgreSQL 18 Documentation [Электронный ресурс] : офиц. документация / PostgreSQL Global Development Group. – Режим доступа: https://www.postgresql.org/docs/18/, свободный. – Загл. с экрана. – (Дата обращения: 11.01.2026).

4. MDN Web Docs [Электронный ресурс] : веб-документация для разработчиков / Mozilla Foundation. – Режим доступа: https://developer.mozilla.org/, свободный. – Загл. с экрана. – (Дата обращения: 09.01.2026).

5. Render Documentation [Электронный ресурс] : офиц. руководство по развёртыванию приложений / Render Services Inc. – Режим доступа: https://render.com/docs, свободный. – Загл. с экрана. – (Дата обращения: 11.01.2026).

6. bcrypt.js Documentation [Электронный ресурс] : библиотека для хеширования паролей / npm. – Режим доступа: https://www.npmjs.com/package/bcrypt, свободный. – Загл. с экрана. – (Дата обращения: 10.01.2026).

7. CSS-Tricks: Complete Guide to Flexbox and Grid [Электронный ресурс] : руководство по современным CSS-макетам / CSS-Tricks. – Режим доступа: https://css-tricks.com/snippets/css/a-guide-to-flexbox/, свободный. – Загл. с экрана. – (Дата обращения: 09.01.2026).

8. W3C Web Standards [Электронный ресурс] : стандарты веб-технологий / World Wide Web Consortium. – Режим доступа: https://www.w3.org/standards/, свободный. – Загл. с экрана. – (Дата обращения: 09.01.2026).

9. Can I Use [Электронный ресурс] : таблицы совместимости браузеров для CSS и JavaScript / Alexis Deveria. – Режим доступа: https://caniuse.com/, свободный. – Загл. с экрана. – (Дата обращения: 10.01.2026).

10. GitHub Guides [Электронный ресурс] : руководства по контролю версий и совместной работе / GitHub Inc. – Режим доступа: https://guides.github.com/, свободный. – Загл. с экрана. – (Дата обращения: 11.01.2026).

**HTML-разметка:**
```html
<form id="register-form" class="auth-form">
    <h1>Регистрация</h1>
    <input type="text" id="name" placeholder="Имя" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="password" id="password" placeholder="Пароль" required>
    <button type="submit">Создать аккаунт</button>
    <p class="auth-link">
        Уже есть аккаунт? <a href="login.html">Войти</a>
    </p>
</form>
```

**JavaScript-обработка:**
```javascript
registerForm.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    
    // Валидация на клиенте
    if (!name || !email || !password) {
        showError('Заполните все поля');
        return;
    }
    
    try {
        const response = await fetch(`${API_BASE_URL}/auth/register`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, email, password })
        });
        
        const data = await response.json();
        
        if (!response.ok) {
            showError(data.error || 'Ошибка регистрации');
            return;
        }
        
        // Сохранение данных пользователя на клиенте
        // ... код сохранения данных ...
        window.location.href = 'index.html';
    } catch (error) {
        showError('Ошибка соединения с сервером');
    }
});
```

**Серверная валидация (backend/src/index.js):**
```javascript
app.post('/api/auth/register', async (req, res) => {
    const { name, email, password } = req.body;
    
    // Проверка обязательных полей
    if (!name || !email || !password) {
        return res.status(400).json({ error: 'Все поля обязательны' });
    }
    
    // Проверка уникальности email
    const [existing] = await db.execute('SELECT id FROM users WHERE email = ?', [email]);
    if (existing.length > 0) {
        return res.status(400).json({ error: 'Пользователь с таким email уже существует' });
    }
    
    // Хеширование пароля
    const saltRounds = 10;
    const passwordHash = await bcrypt.hash(password, saltRounds);
    
    // Создание пользователя
    const [rows] = await db.execute(
        'INSERT INTO users (user_name, email, password_hash) VALUES (?, ?, ?) RETURNING *',
        [name, email, passwordHash]
    );
    
    res.status(201).json(rows[0]);
});
```

#### 2. Форма входа (login.html + auth.js)

**Валидация:**
- Проверка заполнения полей email и password
- Проверка формата email через HTML5 атрибут `type="email"`
- Серверная проверка существования пользователя
- Сравнение хешированного пароля через bcrypt.compare()

**Обработка ошибок:**
```javascript
if (!response.ok) {
    showError(data.error || 'Ошибка входа');
    return;
}
```

#### 3. Форма добавления в корзину (product.js, cart.js)

**Динамическое добавление товара:**
```javascript
async function addToCart(productId) {
    const user = getCurrentUser();
    if (!user) {
        window.location.href = 'login.html';
        return;
    }
    
    try {
        const response = await fetch(`${API_BASE_URL}/cart`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                user_id: user.id,
                product_id: productId,
                quantity: 1
            })
        });
        
        if (response.ok) {
            showNotification('Товар добавлен в корзину');
            updateCartCount();
        }
    } catch (error) {
        console.error('Ошибка добавления в корзину:', error);
    }
}
```

**Обновление количества товара:**
```javascript
async function updateQuantity(cartId, newQuantity) {
    if (newQuantity < 1) return;
    
    const response = await fetch(`${API_BASE_URL}/cart/${cartId}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ quantity: newQuantity })
    });
    
    if (response.ok) {
        loadCart(); // Перезагрузка корзины
    }
}
```

#### 4. Форма оформления заказа (checkout.html + checkout.js)

**HTML с валидацией:**
```html
<form id="checkout-form">
    <div class="form-group">
        <label>Имя *</label>
        <input type="text" id="customer-name" required>
    </div>
    <div class="form-group">
        <label>Телефон *</label>
        <input type="tel" id="customer-phone" pattern="[0-9+\-\s()]+" required>
    </div>
    <div class="form-group">
        <label>Email *</label>
        <input type="email" id="customer-email" required>
    </div>
    <div class="form-group">
        <label>Адрес доставки *</label>
        <textarea id="delivery-address" rows="3" required></textarea>
    </div>
    <div class="payment-methods">
        <div class="payment-method selected" data-method="card">
            Картой онлайн
        </div>
        <div class="payment-method" data-method="cash">
            При получении
        </div>
    </div>
    <button type="submit" class="submit-btn">Оформить заказ</button>
</form>
```

**Валидация и отправка:**
```javascript
checkoutForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const name = document.getElementById('customer-name').value.trim();
    const phone = document.getElementById('customer-phone').value.trim();
    const email = document.getElementById('customer-email').value.trim();
    const address = document.getElementById('delivery-address').value.trim();
    
    // Валидация
    if (!name || !phone || !email || !address) {
        alert('Заполните все обязательные поля');
        return;
    }
    
    const orderData = {
        user_id: user.id,
        customer_name: name,
        customer_phone: phone,
        customer_email: email,
        delivery_address: address,
        payment_method: selectedPaymentMethod,
        comment: document.getElementById('order-comment').value
    };
    
    const response = await fetch(`${API_BASE_URL}/orders`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(orderData)
    });
    
    if (response.ok) {
        window.location.href = 'order-success.html';
    }
});
```

#### 5. Форма написания отзывов (product.js)

**Динамическое отображение звезд рейтинга:**
```javascript
function renderStars(rating) {
    let stars = '';
    for (let i = 1; i <= 5; i++) {
        stars += `<span class="star ${i <= rating ? 'active' : ''}" data-rating="${i}">★</span>`;
    }
    return stars;
}

// Обработка выбора рейтинга
document.querySelectorAll('.star').forEach(star => {
    star.addEventListener('click', function() {
        selectedRating = parseInt(this.dataset.rating);
        updateStars(selectedRating);
    });
});
```

**Отправка отзыва:**
```javascript
async function submitReview() {
    const reviewText = document.getElementById('review-text').value.trim();
    
    if (!selectedRating || !reviewText) {
        alert('Выберите рейтинг и напишите отзыв');
        return;
    }
    
    const response = await fetch(`${API_BASE_URL}/reviews`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            user_id: user.id,
            product_id: productId,
            rating: selectedRating,
            text: reviewText
        })
    });
    
    if (response.ok) {
        loadReviews(); // Перезагрузка отзывов
        document.getElementById('review-text').value = '';
        selectedRating = 0;
    }
}
```

### Скриншоты разработанных форм

**Форма регистрации с валидацией**
![Регистрация с ошибкой](screenshots/register-validation.png)
*При незаполненных полях появляется сообщение "Заполните все поля"*

**Форма входа с проверкой**
![Вход с ошибкой](screenshots/login-error.png)
*При неверных данных: "Неверный email или пароль"*

**Корзина с динамическим изменением количества**
![Корзина интерактивная](screenshots/cart-interactive.png)
*Кнопки + и - для изменения количества, кнопка удаления, автоматический пересчет суммы*

**Форма оформления заказа с валидацией полей**
![Оформление с валидацией](screenshots/checkout-validation.png)
*HTML5 валидация: email проверяется на формат, телефон на паттерн, обязательные поля помечены *

**Форма отзыва с рейтингом**
![Отзыв](screenshots/review-form.png)
*Интерактивные звезды для выбора рейтинга от 1 до 5, текстовое поле для отзыва*

---

## 4. ФОРМИРОВАНИЕ СТРУКТУРЫ БАЗЫ ДАННЫХ

**Цель:** Создать нормализованную структуру реляционной базы данных для хранения информации о пользователях, товарах, заказах, корзине, избранном и отзывах.

### Описание созданных таблиц

База данных реализована на **PostgreSQL 18** и содержит **8 таблиц** с установленными связями и ограничениями целостности.

#### 1. Таблица users (пользователи)
```sql
CREATE TABLE IF NOT EXISTS users (
  id SERIAL PRIMARY KEY,
  user_name VARCHAR(100) NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  created_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour')
);
```
**Назначение:** Хранение данных зарегистрированных пользователей
**Поля:**
- `id` — уникальный идентификатор (автоинкремент)
- `user_name` — имя пользователя
- `email` — email (уникальный, используется для входа)
- `password_hash` — хешированный пароль (bcrypt)
- `created_at` — дата регистрации (МСК)

**Ограничения:**
- `UNIQUE(email)` — защита от дублирования email
- `NOT NULL` — обязательность всех полей

#### 2. Таблица categories (категории товаров)
```sql
CREATE TABLE IF NOT EXISTS categories (
  id SERIAL PRIMARY KEY,
  category_name VARCHAR(255) NOT NULL UNIQUE
);
```
**Назначение:** Классификация товаров по типам
**Данные:** Холодильники, Кофемашины, Посудомоечные машины

#### 3. Таблица products (товары)
```sql
CREATE TABLE IF NOT EXISTS products (
  id SERIAL PRIMARY KEY,
  product_name VARCHAR(255) NOT NULL,
  old_price NUMERIC(10,2),
  price NUMERIC(10,2) NOT NULL,
  description TEXT,
  specifications TEXT,
  warranty TEXT,
  images TEXT,
  category_id INT REFERENCES categories(id) ON DELETE SET NULL,
  created_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour')
);
```
**Назначение:** Хранение информации о товарах
**Поля:**
- `old_price` — старая цена (для товаров со скидкой)
- `price` — текущая цена
- `images` — пути к изображениям (через запятую)
- `category_id` — связь с таблицей categories

**Связи:**
- `FOREIGN KEY (category_id) REFERENCES categories(id)` с `ON DELETE SET NULL` (при удалении категории товар остается)

#### 4. Таблица favorites (избранное)
```sql
CREATE TABLE IF NOT EXISTS favorites (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  product_id INT NOT NULL REFERENCES products(id) ON DELETE CASCADE,
  added_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour'),
  UNIQUE (user_id, product_id)
);
```
**Назначение:** Хранение избранных товаров пользователей
**Связи:**
- `FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE` — при удалении пользователя удаляются его избранные
- `FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE` — при удалении товара удаляются записи из избранного
- `UNIQUE (user_id, product_id)` — пользователь не может добавить один товар дважды

#### 5. Таблица cart (корзина)
```sql
CREATE TABLE IF NOT EXISTS cart (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  product_id INT NOT NULL REFERENCES products(id) ON DELETE CASCADE,
  quantity INT NOT NULL DEFAULT 1,
  total NUMERIC(10,2) NOT NULL,
  added_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour'),
  UNIQUE (user_id, product_id)
);
```
**Назначение:** Временное хранение товаров в корзине до оформления заказа
**Поля:**
- `quantity` — количество единиц товара
- `total` — общая стоимость (quantity * price)

**Связи:** аналогичны favorites с `ON DELETE CASCADE`

#### 6. Таблица orders (заказы)
```sql
CREATE TABLE IF NOT EXISTS orders (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  total NUMERIC(10,2) NOT NULL,
  email VARCHAR(255),
  phone VARCHAR(20),
  delivery_address TEXT,
  status VARCHAR(32) DEFAULT 'pending',
  payment_method VARCHAR(64),
  comment TEXT,
  customer_name VARCHAR(255),
  customer_phone VARCHAR(50),
  customer_email VARCHAR(255),
  created_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour'),
  updated_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour')
);
```
**Назначение:** Хранение оформленных заказов
**Поля:**
- `total` — итоговая сумма заказа
- `status` — статус заказа (pending, processing, completed, cancelled)
- `payment_method` — способ оплаты (card, cash)
- `customer_name, customer_phone, customer_email` — контактные данные покупателя
- `delivery_address` — адрес доставки

#### 7. Таблица order_items (товары в заказе)
```sql
CREATE TABLE IF NOT EXISTS order_items (
  id SERIAL PRIMARY KEY,
  order_id INT NOT NULL REFERENCES orders(id) ON DELETE CASCADE,
  product_id INT NOT NULL REFERENCES products(id),
  quantity INT NOT NULL,
  price NUMERIC(10,2) NOT NULL
);
```
**Назначение:** Связь заказов с товарами (многие-ко-многим)
**Поля:**
- `price` — цена товара на момент заказа (фиксация цены)

**Связи:**
- `FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE CASCADE` — при удалении заказа удаляются все его товары
- `FOREIGN KEY (product_id) REFERENCES products(id)` — связь с товаром без каскадного удаления

#### 8. Таблица reviews (отзывы)
```sql
CREATE TABLE IF NOT EXISTS reviews (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL REFERENCES users(id),
  product_id INT NOT NULL REFERENCES products(id),
  rating INT NOT NULL,
  text TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT (NOW() AT TIME ZONE 'UTC' + INTERVAL '3 hour')
);
```
**Назначение:** Хранение отзывов пользователей о товарах
**Поля:**
- `rating` — оценка от 1 до 5 звезд
- `text` — текст отзыва

**Связи:**
- `FOREIGN KEY (user_id) REFERENCES users(id)`
- `FOREIGN KEY (product_id) REFERENCES products(id)`

### Диаграмма связей таблиц (ER-диаграмма)

```
┌──────────┐
│  users   │──┐
└──────────┘  │
              ├─── favorites ───┐
              │                  │
              ├─── cart ─────────┤
              │                  │
              ├─── orders        │         ┌─────────────┐
              │      │           │         │ categories  │
              │      └─── order_items ───┼──┐            │
              │                  │        │  └─────────────┘
              └─── reviews ──────┤        │
                                 │        │
                         ┌───────────┐    │
                         │ products  │────┘
                         └───────────┘
```

### Скриншоты таблиц из СУБД с демонстрацией хранимых данных

**Таблица users**
![Users table](screenshots/db-users.png)
```
| id | user_name      | email                  | password_hash                      | created_at          |
|----|----------------|------------------------|------------------------------------|---------------------|
| 1  | Алексей Иванов | alexey@example.com     | $2b$10$kH8f7N...                    | 2026-01-10 14:25:31 |
| 2  | Мария Петрова  | maria@example.com      | $2b$10$xP2m9L...                    | 2026-01-11 09:14:22 |
```
*Пароли хешированы с помощью bcrypt, email уникальны*

**Таблица categories**
![Categories table](screenshots/db-categories.png)
```
| id | category_name            |
|----|--------------------------|
| 1  | Холодильники             |
| 2  | Кофемашины               |
| 3  | Посудомоечные машины     |
```

**Таблица products**
![Products table](screenshots/db-products.png)
```
| id | product_name                      | old_price | price    | category_id | images                                  |
|----|-----------------------------------|-----------|----------|-------------|-----------------------------------------|
| 1  | Холодильник Aceline B16AMG        | 17999.00  | 14999.00 | 1           | images/holodilnik_1/holodilnik_1_1.png  |
| 2  | Кофемашина Nivona CafeRomatica... | NULL      | 89990.00 | 2           | images/kofemashina_1/kofemashina_1_1.png|
| 3  | Посудомоечная машина Bosch...     | 45999.00  | 39999.00 | 3           | images/posudomoechnaya_1/posudomoe...   |
```
*old_price заполнен только для товаров со скидкой, category_id связывает с категориями*

**Таблица cart**
![Cart table](screenshots/db-cart.png)
```
| id | user_id | product_id | quantity | total     | added_at            |
|----|---------|------------|----------|-----------|---------------------|
| 1  | 1       | 1          | 2        | 29998.00  | 2026-01-12 10:35:12 |
| 2  | 1       | 3          | 1        | 39999.00  | 2026-01-12 10:42:58 |
```
*Каждая запись — товар в корзине конкретного пользователя, total = quantity * price*

**Таблица favorites**
![Favorites table](screenshots/db-favorites.png)
```
| id | user_id | product_id | added_at            |
|----|---------|------------|---------------------|
| 1  | 1       | 2          | 2026-01-11 15:22:10 |
| 2  | 2       | 1          | 2026-01-12 08:05:33 |
```

**Таблица orders**
![Orders table](screenshots/db-orders.png)
```
| id | user_id | total     | customer_name  | customer_phone  | status    | created_at          |
|----|---------|-----------|----------------|-----------------|-----------|---------------------|
| 1  | 1       | 69997.00  | Алексей Иванов | +7 900 123-45-67| pending   | 2026-01-12 11:15:42 |
| 2  | 2       | 14999.00  | Мария Петрова  | +7 911 987-65-43| completed | 2026-01-11 14:30:12 |
```

**Таблица order_items**
![Order items table](screenshots/db-order-items.png)
```
| id | order_id | product_id | quantity | price     |
|----|----------|------------|----------|-----------|
| 1  | 1        | 1          | 2        | 14999.00  |
| 2  | 1        | 3          | 1        | 39999.00  |
| 3  | 2        | 1          | 1        | 14999.00  |
```
*order_id связывает с заказами, price фиксирует цену на момент покупки*

**Таблица reviews**
![Reviews table](screenshots/db-reviews.png)
```
| id | user_id | product_id | rating | text                                            | created_at          |
|----|---------|------------|--------|-------------------------------------------------|---------------------|
| 1  | 1       | 1          | 5      | Отличный холодильник, очень тихий и вместитель... | 2026-01-12 12:45:22 |
| 2  | 2       | 2          | 4      | Кофе варит отлично, но цена высоковата          | 2026-01-11 16:20:15 |
```

---

## 5. ПРОЦЕСС РАЗВЕРТЫВАНИЯ ВЕБ-САЙТА

**Цель:** Развернуть разработанный веб-сайт на облачной платформе с публичным доступом.

### Описание выбранного веб-хостинга

Для развертывания выбрана облачная платформа **Render.com**:

**Преимущества Render.com:**
- **Бесплатный план** для небольших проектов
- **Автоматический деплой** из GitHub репозитория при каждом push
- **Managed PostgreSQL** — управляемая база данных с автоматическими бэкапами
- **SSL-сертификаты** из коробки (HTTPS)
- **Географическое расположение** — Frankfurt (низкая латентность для Европы и России)
- **Простая конфигурация** через файл `render.yaml`
- **Автоматическое масштабирование** и балансировка нагрузки
- **Логирование** и мониторинг встроены

**Альтернативы:** Heroku, Railway, Vercel (но Render выбран за комбинацию бесплатного плана + managed PostgreSQL)

### Описание процесса развертывания веб-сайта

#### Шаг 1: Подготовка проекта

**Создание конфигурационного файла render.yaml:**
```yaml
services:
  - type: web
    name: kitchen-shop
    env: node
    plan: free
    region: frankfurt
    buildCommand: npm install
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: DATABASE_URL
        sync: false
```
*Параметры:*
- `type: web` — веб-сервис
- `env: node` — Node.js окружение
- `region: frankfurt` — дата-центр во Франкфурте
- `buildCommand` — установка зависимостей
- `startCommand` — запуск сервера через `npm start`
- `DATABASE_URL` — переменная окружения для подключения к PostgreSQL (заполняется в панели Render)

**Настройка package.json:**
```json
{
  "name": "kitchen-shop",
  "version": "1.0.0",
  "main": "backend/src/index.js",
  "scripts": {
    "start": "node backend/src/index.js"
  },
  "engines": {
    "node": ">=18.0.0"
  },
  "dependencies": {
    "express": "^4.18.2",
    "pg": "^8.11.0",
    "bcrypt": "^6.0.0",
    "cors": "^2.8.5"
  }
}
```

#### Шаг 2: Создание PostgreSQL базы данных на Render

1. Зайти в панель управления Render → New → PostgreSQL
2. Указать параметры:
   - **Name:** kitchen-shop-db
   - **Database:** kitchen_shop
   - **User:** postgres
   - **Region:** Frankfurt
   - **Plan:** Free (256MB RAM, 1GB storage)
3. После создания получить **Connection String:**
   ```
   postgres://username:password@dpg-xxxxx-frankfurt-postgres.render.com/kitchen_shop
   ```
4. Скопировать Internal Database URL для подключения

#### Шаг 3: Инициализация базы данных

Выполнить SQL-скрипт [database/schema_pg.sql](database/schema_pg.sql) через Render Dashboard:
- Перейти во вкладку "Shell"
- Подключиться к БД: `psql $DATABASE_URL`
- Выполнить скрипт создания таблиц и заполнения данных

**Результат:**
```
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
INSERT 0 3
INSERT 0 9
```

#### Шаг 4: Развертывание веб-сервиса

1. Загрузить код в GitHub репозиторий:
   ```bash
   git init
   git add .
   git commit -m "Initial commit: SmartCook kitchen shop"
   git remote add origin https://github.com/username/kitchen-shop.git
   git push -u origin main
   ```

2. Создать Web Service на Render:
   - New → Web Service
   - Connect GitHub repository: `username/kitchen-shop`
   - Render автоматически обнаруживает `render.yaml`
   - Указать переменную окружения `DATABASE_URL` (из шага 2)
   - Нажать "Create Web Service"

3. Render автоматически выполняет:
   ```bash
   npm install
   npm start
   ```

4. После успешного деплоя сайт доступен по URL:
   ```
   https://kitchen-shop-l4jl.onrender.com
   ```

#### Шаг 5: Настройка автоматического деплоя

- При каждом `git push` в ветку `main` Render автоматически:
  1. Клонирует новый код
  2. Выполняет `npm install`
  3. Запускает `npm start`
  4. Переключает трафик на новую версию без даунтайма (zero-downtime deployment)

**Лог успешного деплоя:**
```
==> Cloning from https://github.com/username/kitchen-shop...
==> Running build command 'npm install'...
    added 57 packages in 8.2s
==> Starting service with 'npm start'...
    > kitchen-shop@1.0.0 start
    > node backend/src/index.js

    Server running on port 10000
    Using DATABASE_URL for Postgres connection
    PostgreSQL connection established
    Database has 9 products
```

#### Шаг 6: Проверка работоспособности

**Health Check endpoint:**
```bash
curl https://kitchen-shop-l4jl.onrender.com/health
```
**Ответ:**
```json
{
  "status": "healthy",
  "database": "connected",
  "environment": "production",
  "timestamp": "2026-01-12T11:45:32.123Z"
}
```

### Доменное имя и скриншот

**Доменное имя:** [kitchen-shop-l4jl.onrender.com](https://kitchen-shop-l4jl.onrender.com)

**Скриншот сайта в production:**
![Production site](screenshots/production-browser.png)
*В адресной строке браузера отображается:*
```
https://kitchen-shop-l4jl.onrender.com
🔒 Защищено | SSL-сертификат действителен
```

**Доказательства работы:**
- ✅ Главная страница загружается
- ✅ Каталог отображает товары из базы данных
- ✅ Регистрация и авторизация работают
- ✅ Добавление в корзину и избранное функционирует
- ✅ Оформление заказа создает записи в БД
- ✅ Отзывы сохраняются и отображаются
- ✅ SSL-сертификат активен (HTTPS)
- ✅ Адаптивный дизайн работает на мобильных устройствах

**SSL-сертификат:**
![SSL Certificate](screenshots/ssl-certificate.png)
*Действителен до 2027, выдан Let's Encrypt*

**Логи сервера (Render Dashboard):**
```
2026-01-12T11:42:15.321Z - GET /
2026-01-12T11:42:16.122Z - GET /api/categories
2026-01-12T11:42:16.245Z - GET /api/products?featured=true&limit=6
2026-01-12T11:43:02.544Z - POST /api/auth/register
2026-01-12T11:43:45.782Z - POST /api/cart
2026-01-12T11:44:12.334Z - POST /api/orders
```

---

## ЗАКЛЮЧЕНИЕ

В ходе выполнения курсовой работы был разработан полнофункциональный веб-сайт интернет-магазина кухонной техники **SmartCook** с современным дизайном, адаптивной версткой и полным циклом электронной коммерции.

**Достигнутые результаты:**

1. **Функциональность:** Реализованы все ключевые возможности интернет-магазина — регистрация/авторизация, каталог товаров с фильтрацией, корзина, избранное, оформление заказов, система отзывов с рейтингом, личный кабинет с историей покупок.

2. **Верстка и дизайн:** Создан современный темный интерфейс с градиентами и эффектами, реализована полная адаптивность для трех брейкпоинтов (десктоп, планшет, мобильные устройства).

3. **Динамические формы:** Все формы имеют валидацию на клиентской и серверной стороне, обработку ошибок и user-friendly уведомления.

4. **База данных:** Спроектирована нормализованная структура PostgreSQL из 8 таблиц с установленными связями (foreign keys), каскадными удалениями и ограничениями уникальности.

5. **Безопасность:** Пароли хешируются с помощью bcrypt, используются параметризованные запросы для защиты от SQL-инъекций, настроен CORS для безопасных кросс-доменных запросов.

6. **Развертывание:** Сайт успешно развернут на облачной платформе Render.com с автоматическим деплоем из GitHub, managed PostgreSQL, SSL-сертификатом и публичным доступом.

**Практическая значимость:**
Разработанный веб-сайт может использоваться как реальный коммерческий проект для продажи кухонной техники. Архитектура приложения позволяет легко масштабировать функциональность (добавление новых категорий, интеграция платежных систем, административная панель).

**Приобретенные навыки:**
- Современная веб-разработка на стеке HTML5/CSS3/JavaScript + Node.js/Express
- Проектирование и нормализация реляционных баз данных
- Работа с PostgreSQL и управляемыми облачными СУБД
- Разработка RESTful API с аутентификацией
- Деплой full-stack приложений на облачных платформах
- Обеспечение безопасности веб-приложений

Все поставленные задачи выполнены в полном объеме, веб-сайт готов к использованию.

---

## СПИСОК ИСПОЛЬЗОВАННЫХ ИСТОЧНИКОВ

1. **MDN Web Docs: HTML, CSS, JavaScript** — Mozilla Developer Network. URL: https://developer.mozilla.org/ (дата обращения: 10.01.2026)

2. **Node.js Documentation** — Official Node.js documentation. URL: https://nodejs.org/docs/ (дата обращения: 10.01.2026)

3. **Express.js Guide** — Web application framework for Node.js. URL: https://expressjs.com/ (дата обращения: 10.01.2026)

4. **PostgreSQL Documentation** — PostgreSQL 18 Official Documentation. URL: https://www.postgresql.org/docs/ (дата обращения: 11.01.2026)

5. **Render Documentation** — Deploy full-stack applications. URL: https://render.com/docs (дата обращения: 11.01.2026)

6. **bcrypt.js Documentation** — Password hashing library for Node.js. URL: https://www.npmjs.com/package/bcrypt (дата обращения: 10.01.2026)

7. **CSS-Tricks: Complete Guide to Flexbox and Grid** — Modern CSS layouts. URL: https://css-tricks.com/ (дата обращения: 09.01.2026)

8. **W3C Web Standards** — World Wide Web Consortium. URL: https://www.w3.org/standards/ (дата обращения: 09.01.2026)

9. **Can I Use** — Browser compatibility tables for CSS and JavaScript. URL: https://caniuse.com/ (дата обращения: 10.01.2026)

10. **GitHub Guides** — Version control and collaboration. URL: https://guides.github.com/ (дата обращения: 11.01.2026)
